@{
    ViewBag.Title = "Registro de Compra Corporativa";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section scripts{
    <script src=@Url.Content("~/Scripts/controller/compra/compraController.js")></script>
    <script src=@Url.Content("~/Scripts/controller/proveedor/proveedorController.js")></script>
    <script src=@Url.Content("~/Scripts/controller/producto/consultarMercaderiaController.js")></script>
    <script src=@Url.Content("~/Scripts/controller/concepto/conceptoController.js")></script>
    <script src=@Url.Content("~/Scripts/controller/caracteristica/caracteristica_Controller.js")></script>
    <script>
        var tasaIGV = @ViewBag.tasaIGV;
        var idTipoActorPersonaNatural =@ViewBag.idTipoActorPersonaNatural;
        var aplicaLeyAmazonia = @ViewBag.aplicaLeyAmazonia.ToString().ToLower();
        var comprasDestinadasAPorDefecto = @ViewBag.comprasDestinadasAPorDefecto;
        var idTipoActorPersonaJuridica = @ViewBag.idTipoActorPersonaJuridica;
        var realizaCompraAlCredito = @ViewBag.realizaCompraAlCredito.ToString().ToLower();
         var permitirLoteEnDetalleDeCompra = @ViewBag.permitirLoteEnDetalleDeCompra.ToString().ToLower();
        var permitirRegistroEnDetalleDeCompra = @ViewBag.permitirRegistroEnDetalleDeCompra.ToString().ToLower();
        var permitirVencimientoEnDetalleDeCompra = @ViewBag.permitirVencimientoEnDetalleDeCompra.ToString().ToLower();
        var idProveedorGenerico = @ViewBag.idProveedorGenerico;
        var idTipoPersonaSeleccionadaPorDefecto = @ViewBag.idTipoPersonaSeleccionadaPorDefecto;
        var idTipoDocumentoSeleccionadaConTipoPersonaNatural = @ViewBag.idTipoDocumentoSeleccionadaConTipoPersonaNatural;
        var idTipoDocumentoSeleccionadaConTipoPersonaJuridica = @ViewBag.idTipoDocumentoSeleccionadaConTipoPersonaJuridica;
        var idTipoDocumentoIdentidadDni = @ViewBag.idTipoDocumentoIdentidadDni;
        var idTipoDocumentoIdentidadRuc = @ViewBag.idTipoDocumentoIdentidadRuc;
        var fechaActual = '@ViewBag.fechaActual';
        var permitirRegistroFlete = @ViewBag.permitirRegistroFlete.ToString().ToLower();
        var idDocumentoNotaAlamacenInterna = @ViewBag.idDocumentoNotaAlamacenInterna;
        var idUbigeoSede = @ViewBag.idUbigeoSede;
        var direccionSede = '@ViewBag.direccionSede';
        var idModalidadTrasladoPorDefecto = @ViewBag.idModalidadTrasladoPorDefecto;
        var idMotivoTrasladoPorDefecto = @ViewBag.idMotivoTrasladoPorDefecto;
        var idUbigeoSeleccionadoPorDefecto = @ViewBag.idUbigeoSeleccionadoPorDefecto;
        var idUbigeoNoEspecificado = @ViewBag.idUbigeoNoEspecificado;
        var permitirMultipleIngresoDelMismoDetalle = @ViewBag.permitirMultipleIngresoDelMismoDetalle.ToString().ToLower();
        var idDetalleMaestroMedioDePagoEfectivo = @ViewBag.idDetalleMaestroMedioDePagoEfectivo;
        var idDetalleMaestroEntidadBancariaNinguna = @ViewBag.idDetalleMaestroEntidadBancariaNinguna;
        var valorPrecioVentaPorDefectoQueNoSeDebeGuardar = @ViewBag.ValorPrecioVentaPorDefectoQueNoSeDebeGuardar;
        var idEstablecimientoPorDefecto = @ViewBag.idEstablecimientoPorDefecto;
        var idCentroDeAtencionPorDefecto = @ViewBag.idCentroDeAtencionPorDefecto;
        var idPresentacionPorDefecto = @ViewBag.IdPresentacionPorDefecto;
        var idUnidadMedidaPorDefecto = @ViewBag.IdUnidadMedidaPorDefecto;
        var idPresentacionAOcultarEnNombreConceptoNegocio = @ViewBag.IdPresentacionAOcultarEnNombreConceptoNegocio;
        var idUnidadDeMedidaComercialAOcultarEnNombreConceptoNegocio = @ViewBag.IdUnidadDeMedidaComercialAOcultarEnNombreConceptoNegocio;
        var numeroDecimalesEnCantidad = @ViewBag.numeroDecimalesEnCantidad;
        var numeroDecimalesEnPrecio = @ViewBag.numeroDecimalesEnPrecio;
    </script>
}

<div class="col-md-12" id="modelo" ng-controller="compraController" ng-init="inicializarCompraCorporativa()">
    <div class="row">
        <div class="col-md-12">
            <div class="color-palette-set">
                <div class="bg-green color-palette">REGISTRO DE COMPRA CORPORATIVA</div>
            </div>
        </div>
        @Html.Partial("_RegistroCompraPartial")
        <div class="col-md-12">
            <div class="pull-right">
                <button class="btn btn-md btn-primary" title="CONFIRMAR" ng-disabled="hayInconsistencias" ng-click="iniciarTrazaPago()" data-toggle="modal" data-target="#modal-registro-traza-pago"><span class="glyphicon glyphicon-floppy-disk"></span> CONFIRMAR</button>
            </div>
            <div class="pull-right" style="margin-right:15px">
                <button class="btn btn-md btn-primary" title="REGISTAR" ng-disabled="hayInconsistencias" ng-click="registarCompra()"><span class="glyphicon glyphicon-check"></span> REGISTAR</button>
            </div>
        </div>
        @Html.Partial("_ModalRegistroFinanciamientoPartial")
        @Html.Partial("_ModalReiniciarFinanciamiento")
        @Html.Partial("_ModalRegistroTrazaPago")
        @Html.Partial("_ModalRegistroMovimientoMercaderia")
        @Html.Partial("_ModalFijarPrecioDeVenta")
    </div>
</div>

